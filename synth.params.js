//  синтез сигнала из двух форм волн
// Body A ┐
//        ├─ CrossFade(bodyMorph) ─ bodyGain ┐
// Body B ┘                                  ├─► busGain  (уровень = busLevel)
// FM-атака ─ attackGain ────────────────────┘
//
// далее
// busGain идет сюда:
//
//  → DC-Highpass (срез ~80 Гц)
//  → Компрессор (-30 dB, ~2:1, attack ~30 мс, release ~250 мс)
//  → Lowpass (срез ~3300 Гц)
//      ├─► dryGain--------------------─┐
//      ├─► Reverb → EQ3 →  revWetGain ─┤
//      └─► PingPongDelay → delWetGain ─┤→ master → Destination (masterDb ≈ -4 dB)
//      
//                               


window.SYNTH_PARAMS = {
  // ==== Баланс и уровни (микширование слоёв/шины) ====
  bodyLevel:   0.50, // Громкость корпуса (после CrossFade). 0..1 — общий фундамент звука
  attackLevel: 0.4, // Громкость FM-атаки (металлический «укус» в начале). 0..1; 0 = выключена по уровню
  busLevel:    0.55, // Уровень суммы перед FX-цепью (до фильтров/реверба/дилея)

  // ==== Корпусный MORPH (две формы волны через CrossFade) ====
  bodyMorph:   0.008,        // 0 = чистый A (sine), 1 = чистый B (sawtooth). 
  bodyA_Osc:  'sine',       // Осциллятор корпуса A: 'sine'|'triangle'|'square'|'sawtooth'|'fatsawtooth'...
  bodyB_Osc:  'sawtooth',        // Осциллятор корпуса B. Советуются пары: sine↔sawtooth, triangle↔square
  bodyEnv: {                // ЕДИНАЯ огибающая корпуса (ADSR) — применяется к обоим корпусам A и B
    attack: 0.2,          // Время атаки (сек). Больше — мягче вход
    decay:  0.30,           // Спад к сустейну (сек)
    sustain:0.28,           // Уровень поддержания (0..1)
    release:4.0,            // базовый страховочный дефолт (почти не используется - вместо него сделали динамический от индекса)
    attackCurve:  'sine',   // Кривая атаки: 'linear'|'exponential'|'sine'...
    releaseCurve: 'sine'    // Кривая релиза
  },

  // ==== Динамика РЕЛИЗА тела от индекса  ====
  indexRelMin:     4.00, // сек — минимум (для 9)
  indexRelMax:     6.00, // сек — максимум (для 0)
  indexRelCurveK:  1.0,  // k в экспоненте: 1 = линейно; >1 — сильнее укорачивает верх


  // ==== FM-слой (опциональный короткий «щелчок» яркости на атаке) ====
  fmEnable:      true,   // Глобальный флаг: играть FM-атаку 
  fmHarmonicity: 1.7,    // Отношение частот модулятор/носитель. Нецелые → металлический оттенок
  fmModIndex:    4.0,    // Индекс модуляции: глубина яркости. Больше — агрессивнее
  fmEnv: {               // Огибающая ГРОМКОСТИ FM-слоя (короткая вспышка)
    attack: 0.015,
    decay:  0.10,
    sustain:0.05,
    release:1.12,
    attackCurve:  'sine',
    releaseCurve: 'sine'
  },
  fmModEnv: {            // Огибающая МОДУЛЯТОРА фм
    attack: 0.015,
    decay:  0.10,
    sustain:0.05,
    release:0.9,
    attackCurve:  'sine',
    releaseCurve: 'sine'
  },

  // ==== Магистраль (последовательная обработка до разветвления) ====
  dcCutHz:     80,    // High-Pass: срез гула/суб-низа и DC. 20–120 Гц обычно
  compThresh:  -30,   // Компрессор: порог (дБ) — чем ниже, тем сильнее клеит
  compRatio:   2.0,   // Компрессор: отношение сжатия. 1.5–3 мягко, 4+ жёстче
  compAttack:  0.03,  // Атака компа (сек). Меньше — быстрее ловит пики
  compRelease: 0.25,  // Релиз компа (сек). Дольше — плавнее восстанавливает
  lowpassFreq: 3300,  // Low-Pass после компа (Гц). Ниже — темнее/мягче

  // ==== Параллельная РЕВЁРБ-ветка (после lowpass) ====
  reverbRoom: 0.8,    // Размер комнаты Freeverb (0..1)
  reverbDamp: 400,    // Затухание ВЧ хвоста (Гц) — ниже темнит хвост
  reverbWet:  0.30,    // Сколько ревёрба подмешать в микс. 0..1
  revEqLow:   0,       // EQ3: НЧ-полка (дБ). Отрежь низ, если гудит: -6…-12
  revEqMid:   0,       // EQ3: Средние (дБ). -2..+2 для лёгкой коррекции
  revEqHigh:  1,       // EQ3: ВЧ-полка (дБ). Поднять «воздух» +1..+3
  revEqLowFreq:  400,  // Частота НЧ-границы EQ3 (Гц)
  revEqHighFreq: 2500, // Частота ВЧ-границы EQ3 (Гц)

  // ==== Параллельная ДИЛЕЙ-ветка (после lowpass) ====
  //delayTime: '8n',  // Время задержки: число (сек) или музыкальная доля ('4n','8n','8t')
  //feedback:  0.18,  // Обратная связь. 0.1–0.35 обычно музыкально; >0.5 — эхо уходит в бесконечность
  delayWet:  0.4,  // Сколько дилея подмешать в микс. 0..1
  // ==== Динамика от индекса  ====
  indexDelayMinSec: 0.50, // сек — минимум времени задержки (для 0)
  indexDelayMaxSec: 0.65, // сек — максимум времени задержки (для 9)
  indexFeedbackMin: 0.50, // минимум feedback (для 0)
  indexFeedbackMax: 0.65, // максимум feedback (для 9)
  indexDelayCurveK:     1.0, // экспонента  кривой делея 1 = линейно; >1 — агрессивнее к верхам
  indexFeedbackCurveK:  1.0, // экспонента кривой фидбека 

// Реверб ПОСЛЕ дилея (только для повторов)
echoWet:  0.70,  // 0..1 — сколько ревёрба добавить к повторам (внутримикс ветки)
echoRoom: 0.65,  // 0..1 — размер комнаты (Freeverb.roomSize)
echoDamp: 2200,  // Гц   — демпфирование верхов (Freeverb.dampening)
 

  // ==== Системные лимиты/мастер ====
  bodyPolyMax:   16,   // Максимум одновременно звучащих голосов корпуса (на каждый из A и B)
  attackPolyMax: 16,   // Максимум голосов FM-атаки
  masterDb:      -4    // Общая громкость мастера (дБ) на Tone.Destination
};


