//  синтез сигнала из двух форм волн
// Body A ┐
//        ├─ CrossFade(bodyMorph) ─ bodyGain ┐
// Body B ┘                                  ├─► busGain  (уровень = busLevel)
// FM-атака ─ attackGain ────────────────────┘
//
// далее
// busGain идет сюда:
//
//  → DC-Highpass (срез ~80 Гц)
//  → Компрессор (-30 dB, ~2:1, attack ~30 мс, release ~250 мс)
//  → Lowpass (срез ~3300 Гц)
//      ├─► dryGain--------------------─┐
//      ├─► Reverb → EQ3 →  revWetGain ─┤
//      └─► PingPongDelay → delWetGain ─┤→ master → Destination (masterDb ≈ -4 dB)
//      
//                               


window.SYNTH_PARAMS = {
  // ==== Баланс и уровни (микширование слоёв/шины) ====
  bodyLevel:   0.55, // Громкость корпуса (после CrossFade). 0..1 — общий фундамент звука
  attackLevel: 0.2, // Громкость FM-атаки (металлический «укус» в начале). 0..1; 0 = выключена по уровню
  busLevel:    0.60, // Уровень суммы перед FX-цепью (до фильтров/реверба/дилея)

  // ==== Корпусный MORPH (две формы волны через CrossFade) ====
  bodyMorph:   0.05,        // 0 = чистый A (sine), 1 = чистый B (sawtooth). 
  bodyA_Osc:  'sine',       // Осциллятор корпуса A: 'sine'|'triangle'|'square'|'sawtooth'|'fatsawtooth'...
  bodyB_Osc:  'sawtooth',        // Осциллятор корпуса B. Советуются пары: sine↔sawtooth, triangle↔square
  bodyEnv: {                // ЕДИНАЯ огибающая корпуса (ADSR) — применяется к обоим корпусам A и B
    attack: 0.06,          // Время атаки (сек). Больше — мягче вход
    decay:  0.40,           // Спад к сустейну (сек)
    sustain:0.2,           // Уровень поддержания (0..1)
    release:4.0,            // базовый страховочный дефолт (почти не используется - вместо него сделали динамический от индекса)
    attackCurve:  'sine',   // Кривая атаки: 'linear'|'exponential'|'sine'...
    releaseCurve: 'sine'    // Кривая релиза
  },

  // ==== Динамика РЕЛИЗА тела от индекса  ====
  indexRelMin:     0.50, // сек — минимум (для 9)
  indexRelMax:     6.00, // сек — максимум (для 0)
  indexRelCurveK:  1.5,  // k в экспоненте: 1 = линейно; >1 — сильнее укорачивает верх


  // ==== FM-слой (опциональный короткий «щелчок» яркости на атаке) ====
  fmEnable:      false,   // Глобальный флаг: играть FM-атаку 
  fmHarmonicity: 5,    // Отношение частот модулятор/носитель. Нецелые → металлический оттенок
  fmModIndex:    2.0,    // Индекс модуляции: глубина яркости. Больше — агрессивнее
  fmEnv: {               // Огибающая ГРОМКОСТИ FM-слоя (короткая вспышка)
    attack: 0.1,
    decay:  0.2,
    sustain:0.2,
    release:1,
    attackCurve:  'sine',
    releaseCurve: 'sine'
  },
  fmModEnv: {            // Огибающая МОДУЛЯТОРА фм
    attack: 0.05,
    decay:  0.8,
    sustain:0.2,
    release:1,
    attackCurve:  'sine',
    releaseCurve: 'sine'
  },

  // ==== Магистраль (последовательная обработка до разветвления) ====
  dcCutHz:     40,    // High-Pass: срез гула/суб-низа и DC. 20–120 Гц обычно
  compThresh:  -35,   // Компрессор: порог (дБ) — чем ниже, тем сильнее клеит
  compRatio:   4.0,   // Компрессор: отношение сжатия. 1.5–3 мягко, 4+ жёстче
  compAttack:  0.1,  // Атака компа (сек). Меньше — быстрее ловит пики
  compRelease: 0.3,  // Релиз компа (сек). Дольше — плавнее восстанавливает
  lowpassFreq: 650,  // Low-Pass после компа (Гц). Ниже — темнее/мягче

  // ==== Параллельная РЕВЁРБ-ветка (после lowpass) ====
  reverbRoom: 0.9,    // Размер комнаты Freeverb (0..1)
  reverbDamp: 5000,    // Затухание ВЧ хвоста (Гц) — ниже темнит хвост
  reverbWet:  0.3,    // Сколько ревёрба подмешать в микс. 0..1
  revEqLow:   -3,       // EQ3: НЧ-полка (дБ). Отрежь низ, если гудит: -6…-12
  revEqMid:   -5,       // EQ3: Средние (дБ). -2..+2 для лёгкой коррекции
  revEqHigh:  -2,       // EQ3: ВЧ-полка (дБ). Поднять «воздух» +1..+3
  revEqLowFreq:  200,  // Частота НЧ-границы EQ3 (Гц)
  revEqHighFreq: 2500, // Частота ВЧ-границы EQ3 (Гц)
  // Добротность (общая «резкость» границ полос реверб-EQ)
  revEqQ: 1.0,   // меньше — мягче, больше — уже/резче переход


  // ==== Параллельная ДИЛЕЙ-ветка (после lowpass) ====
  //delayTime: '8n',  // Время задержки: число (сек) или музыкальная доля ('4n','8n','8t')
  //feedback:  0.18,  // Обратная связь. 0.1–0.35 обычно музыкально; >0.5 — эхо уходит в бесконечность
  delayWet:  0.2,  // Сколько дилея подмешать в микс. 0..1
  // ==== Динамика от индекса  ====
  indexDelayMinSec: 0.2, // сек — минимум времени задержки (для 0)
  indexDelayMaxSec: 0.6, // сек — максимум времени задержки (для 9)
  indexFeedbackMin: 0.2, // минимум feedback (для 0)
  indexFeedbackMax: 1, // максимум feedback (для 9)
  indexDelayCurveK: 1, // экспонента  кривой делея 1 = линейно; >1 — агрессивнее к верхам
  indexFeedbackCurveK:  1.5, // экспонента кривой фидбека 

// Реверб ПОСЛЕ дилея (только для повторов)
echoWet:  0.8,  // 0..1 — сколько ревёрба добавить к повторам (внутримикс ветки)
echoRoom: 0.7,  // 0..1 — размер комнаты (Freeverb.roomSize)
echoDamp: 2500,  // Гц   — демпфирование верхов (Freeverb.dampening)
 

  // ==== Системные лимиты/мастер ====
  bodyPolyMax:   24,   // Максимум одновременно звучащих голосов корпуса (на каждый из A и B)
  attackPolyMax: 24,   // Максимум голосов FM-атаки
  masterDb:      -6,    // Общая громкость мастера (дБ) на Tone.Destination


// ==== Мастер-EQ (после masterGain, перед Destination) ====
//  lowFrequency — до какой частоты считается «низ».
//  highFrequency — от какой частоты начинается «верх».
//  Полки = фильтры, которые управляют целым диапазоном выше/ниже точки.
//   Q = «острота» границы: низкое Q = мягкий переход, высокое Q = резкий, узкий.
// Включатель: если false — мастер-EQ вообще не создаётся и цепочка не меняется.

  masterEqEnable: true,

  // Усиления полос в дБ (нейтраль = 0)
  masterEqLow:   -2,   // НЧ-полка (низ)
  masterEqMid:   0,   // середина
  masterEqHigh:  -7,   // ВЧ-полка (верх)

  // Частоты раздела полос (Гц)
  masterEqLowFreq:   150,   // граница Low/Mid
  masterEqHighFreq:  350,  // граница Mid/High

  // Добротность (общая для всех полос)
  masterEqQ: 1.0,



};


